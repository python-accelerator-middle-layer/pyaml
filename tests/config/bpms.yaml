type: pyaml.pyaml
instruments:
  - type: pyaml.instrument
    name: sr
    energy: 6e9
    simulators:
      - type: pyaml.lattice.simulator
        lattice: sr/lattices/ebs.mat
        name: design
    controls:
      - type: tango.pyaml.controlsystem
        tango_host: ebs-simu-3:10000
        name: live
    data_folder: /data/store
    devices:
    - type: pyaml.bpm.bpm
      name: BPM_C01-01
      model:
        type: pyaml.bpm.bpm_tiltoffset_model
        x_pos:
          type: tango.pyaml.attribute_read_only
          attribute: srdiag/bpm/c01-01/SA_HPosition
          unit: mm
        y_pos:
          type: tango.pyaml.attribute_read_only
          attribute: srdiag/bpm/c01-01/SA_VPosition
          unit: mm
        x_offset:
          type: tango.pyaml.attribute
          attribute: srdiag/bpm/c01-01/HOffset
          unit: mm
        y_offset:
          type: tango.pyaml.attribute
          attribute: srdiag/bpm/c01-01/VOffset
          unit: mm
        tilt:
          type: tango.pyaml.attribute
          attribute: srdiag/bpm/c01-01/Tilt_Angle
          unit: rad
    - type: pyaml.bpm.bpm
      name: BPM_C01-02
      model:
        type: pyaml.bpm.bpm_simple_model
        x_pos:
          type: tango.pyaml.attribute_read_only
          attribute: srdiag/bpm/c01-02/SA_HPosition
          unit: mm
        y_pos:
          type: tango.pyaml.attribute_read_only
          attribute: srdiag/bpm/c01-02/SA_VPosition
          unit: mm
    - type: pyaml.bpm.bpm
      name: BPM_C01-03
      model:
        type: pyaml.bpm.bpm_simple_model
        x_pos:
          type: tango.pyaml.attribute_read_only
          attribute: srdiag/bpm/c01-03/SA_HPosition
          unit: mm
        y_pos:
          type: tango.pyaml.attribute_read_only
          attribute: srdiag/bpm/c01-03/SA_VPosition
          unit: mm
    - type: pyaml.magnet.cfm_magnet
      name: SH1A-C01         #Name of the element in the lattice model
      mapping:
        # Multipole mapping for usage in families, in this example SH1-C01A-H is not 
        # a lattice element present in the model, it is just a name to use in 
        # PyAML families. When this 'virutal' element is set, it then applies
        # the corresponding multipole on the parent element.
        - [B0, SH1A-C01-H]
        - [A0, SH1A-C01-V]
        - [A1, SH1A-C01-SQ]
      model: sr/magnet_models/SH1AC01.yaml
